snippets:
  - name: "[gbls] list git branches"
    keyword: "gbls,"
    snippet: git branch --list

  - name: "[ghls] list github local repositories"
    keyword: "ghls,"
    snippet: "ghq list"

  - name: "[gwls] list git worktree branches"
    keyword: "gwls,"
    snippet: gwq list
  - name: "[gwa] add git worktree branches"
    keyword: "gwa,"
    snippet: gwq add {{worktree}}
  - name: "[gwrm] remove git worktree branches"
    keyword: "gwrm,"
    snippet: gwq remove {{worktree}}
  - name: "[gwcd] change directory to git worktree"
    keyword: "gwcd,"
    snippet: cd $(gwq get {{worktree}})
  - name: "[gcode] open git worktree in vscode"
    keyword: "gcode,"
    snippet: gwq exec {{worktree}} -- code .

completions:
  - name: add git worktree branches
    patterns:
      - "^gwq add $"
    sourceCommand: "git for-each-ref --format='%(refname:short)' refs/heads/ | sed '/^$/d'"
    options:
      --prompt: "'Git Worktree> '"
  - name: remove git worktree branches
    patterns:
      - "^gwq remove $"
    sourceCommand: "gwq list --json | jq -r '.[].branch'"
    options:
      --prompt: "'Git Worktree> '"
  - name: change directory to git worktree
    patterns:
      - "^cd \\$\\(gwq get $"
    sourceCommand: "gwq list --json | jq -r '.[].branch'"
    options:
      --prompt: "'Git Worktree> '"
  - name: execute commands in git worktree
    patterns:
      - "^gwq exec $"
    sourceCommand: "gwq list --json | jq -r '.[].branch'"
    options:
      --prompt: "'Git Worktree> '"